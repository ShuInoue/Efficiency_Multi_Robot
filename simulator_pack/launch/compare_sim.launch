<?xml version="1.0"?>
<launch>
    <env name="GAZEBO_MODEL_PATH" value="$(find simulator_pack)/models:$(optenv GAZEBO_MODEL_PATH)"/>
    <arg name="world_file" default="$(find simulator_pack)/world/model.world"/>

    <arg name="gui" default="true"/>
    <arg name="rtabmap" default="true"/>
    <arg name="sensor" default="kinect"/>

    <arg name="robot_name" default="robot1"/>
    
    <arg name="robot1_init_x" default="6.0"/>
    <arg name="robot1_init_y" default="-13.0"/>
    <arg name="robot1_init_yaw" default="1.57"/>

    <!-- <arg name="robot1_init_x" default="9.21"/>
    <arg name="robot1_init_y" default="-11.36"/>
    <arg name="robot1_init_yaw" default="0.0"/> -->
    
    <!-- <arg name="robot1_init_x" default="8.0"/>
    <arg name="robot1_init_y" default="14.0"/>
    <arg name="robot1_init_yaw" default="1.57"/> -->

    <!-- <arg name="robot1_init_x" default="-8.0"/>
    <arg name="robot1_init_y" default="-11.5"/>
    <arg name="robot1_init_yaw" default="0.0"/> -->

    <!-- <arg name="robot1_init_x" default="-8.0"/>
    <arg name="robot1_init_y" default="3.5"/>
    <arg name="robot1_init_yaw" default="0.0"/> -->
    
    <arg name="map_path" default="$(find simulator_pack)/launch/config/map.yaml"/>
    <arg name="map_frame" default="/$(arg robot_name)/map"/>
    <arg name="map_topic" default="/$(arg robot_name)/map_continuity"/>

    <include file="$(find gazebo_ros)/launch/empty_world.launch">
        <arg name="use_sim_time" default="true"/>
        <arg name="debug" default="false"/>
        <arg name="gui" default="$(arg gui)"/>
        <arg name="world_name" default="$(arg world_file)"/>
    </include>

    <group ns="$(arg robot_name)">
        <include file="$(find multi_turtlebot_gazebo)/launch/includes/one_turtlebot_spawn.launch.xml">
            <arg name="sensor" default="kinect"/>
            <arg name="robot_name" default="$(arg robot_name)"/>
            <arg name="init_x" default="$(arg robot1_init_x)"/>
            <arg name="init_y" default="$(arg robot1_init_y)"/>
            <arg name="init_yaw" default="$(arg robot1_init_yaw)"/>
        </include>
        <include file="$(find multi_turtlebot_gazebo)/launch/includes/one_turtlebot_rtabmap.launch.xml">
            <arg name="robot_name" default="$(arg robot_name)"/>
            <arg name="map_frame" value="$(arg map_frame)"/>
            <arg name="map_topic" default="$(arg map_topic)"/>
        </include>
        <!-- <include file="$(find multi_turtlebot_gazebo)/launch/includes/move_base.launch.xml">
            <arg name="robot_name" value="$(arg robot_name)"/>
        </include> -->
        <!-- <node pkg="robot_pose_publisher" type="robot_pose_publisher" name="robot_pose_publishert">
            <remap from="robot_pose" to="pose"/>
            <param name="map_frame" value="$(arg robot_name)/map"/>
            <param name="base_frame" value="$(arg robot_name)/base_link"/>
            <param name="is_stamped" value="true"/>
        </node> -->

        <!-- <node pkg="tf" type="static_transform_publisher" name="odom_to_map_tf_broadcaster" args="3.2 -3.6 0 0 0 0 $(arg robot_name)/map $(arg robot_name)/odom 100"/> -->

        <node pkg="map_server" type="map_server" name="map_server" args="$(arg map_path)">
            <remap from="map" to="$(arg map_topic)"/>
            <param name="frame_id" value="$(arg map_frame)"/>
        </node>
   
        
    </group>

</launch>